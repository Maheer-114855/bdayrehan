<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Happy Birthday</title>

<style>
body{
  margin:0;
  height:100vh;
  display:grid;
  place-items:center;
  background:#0b1026;
  color:white;
  font-family:system-ui;
  overflow:hidden;
}

/* CARD */
.card{
  width:360px;
  padding:20px;
  border-radius:20px;
  background:rgba(255,255,255,.08);
  text-align:center;
  position:relative;
}

/* DISCORD-LIKE SHAKE */
@keyframes discordShake {
  0%{transform:translate(0)}
  10%{transform:translate(-12px,8px)}
  20%{transform:translate(12px,-8px)}
  30%{transform:translate(-14px,-10px)}
  40%{transform:translate(14px,10px)}
  50%{transform:translate(-10px,6px)}
  60%{transform:translate(10px,-6px)}
  70%{transform:translate(-8px,4px)}
  80%{transform:translate(8px,-4px)}
  100%{transform:translate(0)}
}

.shaking{
  animation:discordShake .12s infinite;
}

/* BUTTON */
button{
  padding:14px 20px;
  font-size:16px;
  border-radius:14px;
  border:none;
  cursor:pointer;
  font-weight:800;
}

/* TAKEOVER */
#takeover{
  position:fixed;
  inset:0;
  background:black;
  display:none;
  align-items:center;
  justify-content:center;
  z-index:9999;
}

#takeover video{
  width:100vw;
  height:100vh;
  object-fit:cover;
}
</style>
</head>

<body>

<div class="card" id="card">
  <h1>ðŸŽ‚ Happy Birthday!</h1>
  <p>Make a wishâ€¦</p>
  <button id="openBtn">Blow Candle ðŸ’¨</button>
</div>

<!-- SINGLE TAKEOVER -->
<div id="takeover">
  <video id="takeoverVideo" src="meme.mp4" playsinline></video>
</div>

<script>
const openBtn = document.getElementById("openBtn");
const card = document.getElementById("card");
const takeover = document.getElementById("takeover");
const video = document.getElementById("takeoverVideo");

/* AUDIO (BASS FIXED) */
const AudioContext = window.AudioContext || window.webkitAudioContext;
const audioCtx = new AudioContext();

const source = audioCtx.createMediaElementSource(video);
const bass = audioCtx.createBiquadFilter();
bass.type = "lowshelf";
bass.frequency.value = 180;
bass.gain.value = 20;

const gain = audioCtx.createGain();
gain.gain.value = 1.7;

source.connect(bass);
bass.connect(gain);
gain.connect(audioCtx.destination);

document.addEventListener("click",()=>{
  if(audioCtx.state==="suspended") audioCtx.resume();
},{once:true});

/* MAIN ACTION */
openBtn.addEventListener("click",()=>{
  card.classList.add("shaking");

  takeover.style.display="flex";
  video.currentTime=0;
  video.muted=false;
  video.play();

  setTimeout(()=>{
    window.location.href="letter.html";
  },5000);
});
</script>

</body>
</html>
